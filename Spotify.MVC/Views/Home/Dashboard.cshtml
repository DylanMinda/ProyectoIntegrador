@{
    ViewData["Title"] = "Beathouse - Tu Biblioteca Musical";
}

<link rel="stylesheet" href="~/css/DashboardHome.css">

<div class="contenedor">
    <!-- SIDEBAR -->
    <div class="   sidebar">
        <div class="logo">⚡ Beathouse</div>

        <a asp-controller="Playlists" asp-action="Create" class="boton-crear">
            + Crear
        </a>

        <a asp-controller="Usuarios" asp-action="EditarPerfil" class="menu-item">
            👤 Perfil
        </a>

        <a asp-controller="Playlists" asp-action="Index" class="menu-item">
            📚 Tu biblioteca
        </a>
    </div>

    <!-- CONTENIDO PRINCIPAL -->
    <div class="contenido">
        <div class="header">
            <div class="botones-nav">
                <button class="btn-nav">←</button>
                <button class="btn-nav">→</button>
            </div>

            <div class="header-derecha">
                <a asp-controller="Planes" asp-action="Index" class="btn-premium">
                    Descubrir Premium
                </a>
                <button class="btn-perfil">
                    @Model.Nombre.Substring(0, 1).ToUpper()
                </button>
                <label>Logout</label>
                <a asp-controller="Home" asp-action="Logout" class="btn-logout">
                    🚪
                </a>
            </div>
        </div>

        <!-- Información del Plan y Saldo -->
        <div class="seccion-plan">
            @if (Model.Plan != null)
            {
                <p><strong>Tu plan actual:</strong> @Model.Plan.Nombre</p>
            }
            else
            {
                <p>No tienes ningún plan asignado.</p>
            }
        </div>

        <div class="seccion-saldo">
            <h2>Cash</h2>
            <p class="saldo-actual">Cash: $@Model.Saldo.ToString("F2")</p>
            <a asp-controller="Planes" asp-action="RecargarSaldo" class="btn-recargar">
                INGRESA DATOS PARA FACTURACION
            </a>
        </div>

        <!-- Canciones en tendencia -->
        <div class="content-section">
            <div class="section-header">
                <h2>Canciones en disponibles</h2>
            </div>
            <div class="cards-grid">
                @if (Model.Canciones != null)
                {
                    @foreach (var item in Model.Canciones)
                    {
                        <div class="card">
                            <a href="@Url.Action("Player", "Canciones", new { id = item.Id })">
                                <div class="card-title">@item.Titulo</div>
                            </a>
                        </div>
                    }
                }
            </div>
        </div>

        <!-- Tus Playlists -->
        <div class="seccion">
            <div class="titulo-seccion">
                <h2>Tus Playlists</h2>
                <a asp-controller="Playlists" asp-action="Index" class="btn-mostrar-todo">Ver todas</a>
            </div>

            <div class="tarjetas">
                @if (ViewBag.Playlists != null && ((IEnumerable<dynamic>)ViewBag.Playlists).Any())
                {
                    @foreach (var playlist in (IEnumerable<dynamic>)ViewBag.Playlists)
                    {
                        <div class="tarjeta">
                            <a href="@Url.Action("Details", "Playlists", new { id = playlist.Id })" style="text-decoration: none; color: inherit;">
                                <div class="icono-tarjeta">🎵</div>
                                <div class="nombre-tarjeta">@playlist.Nombre</div>
                                <div class="descripcion-tarjeta">Playlist • Usuario @playlist.UsuarioId</div>
                            </a>
                        </div>
                    }
                    <div class="tarjeta">
                        <a asp-controller="Playlists" asp-action="Create" style="text-decoration: none; color: inherit;">
                            <div class="icono-tarjeta">➕</div>
                            <div class="nombre-tarjeta">Crear playlist</div>
                            <div class="descripcion-tarjeta">Agrega una nueva playlist</div>
                        </a>
                    </div>
                }
                else
                {
                    <div class="tarjeta">
                        <a asp-controller="Playlists" asp-action="Create" style="text-decoration: none; color: inherit;">
                            <div class="icono-tarjeta">🎵</div>
                            <div class="nombre-tarjeta">No tienes playlists</div>
                            <div class="descripcion-tarjeta">Crear mi primera playlist</div>
                        </a>
                    </div>
                }
            </div>
        </div>
    </div>
</div>